"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9561],{86593:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"atomicui","title":"AtomicUI","description":"AtomicUI is the UI framework used throughout the project. It is built around four modules:","source":"@site/docs/atomicui.md","sourceDirName":".","slug":"/atomicui","permalink":"/order/docs/atomicui","draft":false,"unlisted":false,"editUrl":"https://github.com/michaeldougal/framework/edit/master/docs/atomicui.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"AtomicUI"},"sidebar":"defaultSidebar","previous":{"title":"Usage","permalink":"/order/docs/usage"},"next":{"title":"Networking","permalink":"/order/docs/networking"}}');var i=t(74848),r=t(28453);const s={sidebar_position:3,title:"AtomicUI"},l="Working with AtomicUI",o={},c=[{value:"Creating a ScreenGui",id:"creating-a-screengui",level:2},{value:"Creating an AtomicPane",id:"creating-an-atomicpane",level:2},{value:"Automatic alpha mapping",id:"automatic-alpha-mapping",level:3},{value:"Custom springs",id:"custom-springs",level:3},{value:"Creating an AtomicButton",id:"creating-an-atomicbutton",level:2},{value:"Linking panes",id:"linking-panes",level:2},{value:"Using UIStateManager",id:"using-uistatemanager",level:2},{value:"Registering a component",id:"registering-a-component",level:3},{value:"Registering states",id:"registering-states",level:3},{value:"Switching states",id:"switching-states",level:3},{value:"Blocking transitions",id:"blocking-transitions",level:3},{value:"Reacting to state changes",id:"reacting-to-state-changes",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"working-with-atomicui",children:"Working with AtomicUI"})}),"\n",(0,i.jsx)(n.p,{children:"AtomicUI is the UI framework used throughout the project. It is built around four modules:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/api/AtomicPane",children:"AtomicPane"})})," \u2014 The base class for all UI components. Provides visibility animation, spring management, and automatic transparency interpolation."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/api/AtomicButton",children:"AtomicButton"})})," \u2014 Extends ",(0,i.jsx)(n.code,{children:"AtomicPane"})," with interactive states (hover, press, selected, enabled) and corresponding events."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/api/ScreenGui",children:"ScreenGui"})})," \u2014 A small utility for creating ",(0,i.jsx)(n.code,{children:"ScreenGui"})," instances with sensible defaults."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/api/UIStateManager",children:"UIStateManager"})})," \u2014 Manages which registered UI components are visible based on named application states."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["GUI template instances are stored under ",(0,i.jsx)(n.code,{children:"ReplicatedStorage.GuiTemplates"}),". The included ",(0,i.jsx)(n.code,{children:"/amodule"})," snippet can be used to create new template asset modules."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-screengui",children:"Creating a ScreenGui"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"ScreenGui.new"})," to create a container for your UI. It automatically parents to ",(0,i.jsx)(n.code,{children:"PlayerGui"})," at runtime and to ",(0,i.jsx)(n.code,{children:"CoreGui"})," in story environments."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local ScreenGui = shared("ScreenGui") ---@module ScreenGui\r\n\r\nlocal MyGui = ScreenGui.new("MyGui")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"creating-an-atomicpane",children:"Creating an AtomicPane"}),"\n",(0,i.jsxs)(n.p,{children:["Subclass ",(0,i.jsx)(n.code,{children:"AtomicPane"})," to build a custom UI component. Override ",(0,i.jsx)(n.code,{children:"_draw"})," to update your elements each frame based on spring values."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local AtomicPane = shared("AtomicPane") ---@module AtomicPane\r\n\r\nlocal MyPane = setmetatable({}, AtomicPane)\r\nMyPane.__index = MyPane\r\nMyPane.ClassName = "MyPane"\r\n\r\nfunction MyPane:_draw()\r\n    local alpha = self._springs.Alpha.Position\r\n    self.Gui.Visible = alpha < 0.999\r\n    self.Gui.GroupTransparency = alpha\r\nend\r\n\r\nfunction MyPane.new(parent: Instance)\r\n    local self = setmetatable(AtomicPane.new("MyPaneTemplate", {\r\n        TitleLabel = "Title",\r\n    }), MyPane)\r\n\r\n    self:SetVisible(false, true) -- start hidden, no animation\r\n\r\n    self.Gui.Parent = parent\r\n\r\n    return self\r\nend\r\n\r\nreturn MyPane\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The string key passed to ",(0,i.jsx)(n.code,{children:"AtomicPane.new"})," must match the name of a ",(0,i.jsx)(n.code,{children:"GuiObject"})," in ",(0,i.jsx)(n.code,{children:"ReplicatedStorage.GuiTemplates"}),". The second argument maps descendant instance names to keys on ",(0,i.jsx)(n.code,{children:"self"})," for quick access."]}),"\n",(0,i.jsx)(n.h3,{id:"automatic-alpha-mapping",children:"Automatic alpha mapping"}),"\n",(0,i.jsxs)(n.p,{children:["Instead of manually interpolating transparencies in ",(0,i.jsx)(n.code,{children:"_draw"}),", call ",(0,i.jsx)(n.code,{children:"MapAlpha"})," on any element whose transparency properties should be driven by the ",(0,i.jsx)(n.code,{children:"Alpha"})," spring automatically:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function MyPane.new(parent: Instance)\r\n    local self = setmetatable(AtomicPane.new("MyPaneTemplate", {}), MyPane)\r\n\r\n    self:MapAlpha(self.Gui) -- maps all descendants recursively\r\n\r\n    self:SetVisible(false, true)\r\n    self.Gui.Parent = parent\r\n\r\n    return self\r\nend\n'})}),"\n",(0,i.jsx)(n.h3,{id:"custom-springs",children:"Custom springs"}),"\n",(0,i.jsx)(n.p,{children:"Add extra springs for animations beyond visibility:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function MyPane.new(parent: Instance)\r\n    local self = setmetatable(AtomicPane.new("MyPaneTemplate", {}), MyPane)\r\n\r\n    self:AddSpring("Slide", { s = 35, d = 1, i = 0 })\r\n\r\n    self:SetVisible(false, true)\r\n    self.Gui.Parent = parent\r\n\r\n    return self\r\nend\r\n\r\nfunction MyPane:_draw()\r\n    local alpha = self._springs.Alpha.Position\r\n    local slide = self._springs.Slide.Position\r\n\r\n    self.Gui.Visible = alpha < 0.999\r\n    self.Gui.Position = UDim2.new(slide * -0.5, 0, 0.5, 0)\r\nend\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"creating-an-atomicbutton",children:"Creating an AtomicButton"}),"\n",(0,i.jsxs)(n.p,{children:["Subclass ",(0,i.jsx)(n.code,{children:"AtomicButton"})," the same way as ",(0,i.jsx)(n.code,{children:"AtomicPane"}),". It adds ",(0,i.jsx)(n.code,{children:"Hovered"}),", ",(0,i.jsx)(n.code,{children:"Pressed"}),", ",(0,i.jsx)(n.code,{children:"Selected"}),", and ",(0,i.jsx)(n.code,{children:"Enabled"})," springs automatically, along with the corresponding signals and setter methods."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local AtomicButton = shared("AtomicButton") ---@module AtomicButton\r\n\r\nlocal MyButton = setmetatable({}, AtomicButton)\r\nMyButton.__index = MyButton\r\nMyButton.ClassName = "MyButton"\r\n\r\nfunction MyButton:_draw()\r\n    local alpha   = self._springs.Alpha.Position\r\n    local hovered = self._springs.Hovered.Position\r\n    local pressed = self._springs.Pressed.Position\r\n\r\n    self.Gui.Visible = alpha < 0.999\r\n\r\n    -- Subtle scale feedback\r\n    local scale = 1 - pressed * 0.04 + hovered * 0.02\r\n    self.Gui.Size = UDim2.fromScale(scale, scale)\r\nend\r\n\r\nfunction MyButton.new(parent: Instance)\r\n    local self = setmetatable(AtomicButton.new("MyButtonTemplate", {}), MyButton)\r\n\r\n    self.Activated:Connect(function()\r\n        print("Button clicked!")\r\n    end)\r\n\r\n    self:SetVisible(false, true)\r\n    self.Gui.Parent = parent\r\n\r\n    return self\r\nend\r\n\r\nreturn MyButton\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AtomicButton"})," automatically creates a transparent ",(0,i.jsx)(n.code,{children:"TextButton"})," named ",(0,i.jsx)(n.code,{children:"Sensor"})," as a child of ",(0,i.jsx)(n.code,{children:"Gui"})," if one does not already exist. You do not need to add one manually."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"linking-panes",children:"Linking panes"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"AtomicPane:Link"})," to tie the lifetime (and optionally visibility) of a child pane to a parent pane. When the parent is destroyed, the linked child is cleaned up automatically."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"local childPane = MyChildPane.new()\r\nchildPane:Link(parentPane)\r\n\r\n-- Also mirror visibility changes:\r\nchildPane:Link(parentPane, true)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"using-uistatemanager",children:"Using UIStateManager"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"UIStateManager"})," allows you to define named application states that show and hide groups of registered UI components together."]}),"\n",(0,i.jsx)(n.h3,{id:"registering-a-component",children:"Registering a component"}),"\n",(0,i.jsxs)(n.p,{children:["Call ",(0,i.jsx)(n.code,{children:"RegisterComponent"})," with a unique name and the pane instance. The component must implement ",(0,i.jsx)(n.code,{children:":Show()"})," and ",(0,i.jsx)(n.code,{children:":Hide()"}),", which all ",(0,i.jsx)(n.code,{children:"AtomicPane"})," subclasses provide."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local UIStateManager = shared("UIStateManager") ---@module UIStateManager\r\n\r\nUIStateManager:RegisterComponent("HUD", myHudPane)\r\nUIStateManager:RegisterComponent("PauseMenu", myPausePane)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registering-states",children:"Registering states"}),"\n",(0,i.jsxs)(n.p,{children:["Define states with ",(0,i.jsx)(n.code,{children:"RegisterState"}),", specifying which components to show and hide:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'UIStateManager:RegisterState("Gameplay", {\r\n    Shows = { "HUD" },\r\n    Hides = { "PauseMenu" },\r\n    CoreGui = {\r\n        Shows = { "*" },\r\n        Hides = {},\r\n    },\r\n    GamepadCursorEnabled = false,\r\n})\r\n\r\nUIStateManager:RegisterState("Paused", {\r\n    Shows = { "PauseMenu" },\r\n    Hides = { "HUD" },\r\n    GamepadCursorEnabled = true,\r\n})\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:'"*"'})," in ",(0,i.jsx)(n.code,{children:"Shows"})," or ",(0,i.jsx)(n.code,{children:"Hides"})," to target all registered components at once."]}),"\n",(0,i.jsx)(n.h3,{id:"switching-states",children:"Switching states"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'UIStateManager:SetState("Paused")\r\n\r\n-- Restore the previous state\r\nUIStateManager:PreviousState()\r\n\r\n-- Return to the default state\r\nUIStateManager:SetDefault()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"blocking-transitions",children:"Blocking transitions"}),"\n",(0,i.jsxs)(n.p,{children:["Add a ",(0,i.jsx)(n.code,{children:"Blocks"})," list to a state's properties to prevent certain transitions while that state is active:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'UIStateManager:RegisterState("Cutscene", {\r\n    Shows = {},\r\n    Hides = { "*" },\r\n    Blocks = { "*" }, -- prevent all state changes\r\n})\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Pass ",(0,i.jsx)(n.code,{children:"true"})," as the second argument to ",(0,i.jsx)(n.code,{children:"SetState"})," to force a transition regardless of blocks:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'UIStateManager:SetState("Gameplay", true)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"reacting-to-state-changes",children:"Reacting to state changes"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"RegisterEventHook"})," to run logic whenever the state changes:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'UIStateManager:RegisterEventHook("StateChange", function(newState, oldState)\r\n    print("Transitioned from", oldState, "to", newState)\r\nend)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Available hooks: ",(0,i.jsx)(n.code,{children:"StateChange"}),", ",(0,i.jsx)(n.code,{children:"BeforeStateChange"}),", ",(0,i.jsx)(n.code,{children:"AfterStateChange"}),", ",(0,i.jsx)(n.code,{children:"CoreGuiChange"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var a=t(96540);const i={},r=a.createContext(i);function s(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);